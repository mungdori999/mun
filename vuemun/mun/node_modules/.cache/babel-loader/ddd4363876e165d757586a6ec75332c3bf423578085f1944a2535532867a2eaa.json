{"ast":null,"code":"import * as THREE from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport axiosInstance from \"@/axios/axiosinstance\";\nimport Swal from \"sweetalert2\";\nexport default {\n  data() {\n    return {\n      itemName: '',\n      gltf: ''\n    };\n  },\n  mounted() {\n    if (this.$store.state.userInfo.itemId) {\n      axiosInstance.get('/api/item/' + this.$store.state.userInfo.itemId).then(data => {\n        this.itemName = data.data.itemName;\n        this.gltf = data.data.gltf;\n        this.renderGame();\n      }).catch(error => {\n        Swal.fire({\n          title: \"에러\",\n          text: error,\n          icon: \"warning\"\n        });\n      });\n    }\n  },\n  methods: {\n    renderGame() {\n      let scene = new THREE.Scene();\n      let renderer = new THREE.WebGLRenderer({\n        canvas: document.querySelector(\"#canvas\"),\n        antialias: true,\n        alpha: true // alpha 옵션을 true로 설정하여 배경을 투명하게\n      });\n      let camera = new THREE.PerspectiveCamera(30, 1);\n      camera.position.set(0, 0, 5);\n\n      // scene.background = new THREE.Color(\"white\");\n      scene.background = null;\n      // OrbitControls 생성\n      const controls = new OrbitControls(camera, renderer.domElement);\n      controls.enableDamping = true; // 부드러운 움직임을 위해 댐핑 활성화\n      controls.dampingFactor = 0.25;\n      controls.screenSpacePanning = false;\n\n      // GLTFLoader를 사용하여 모델 로드\n      const loader = new GLTFLoader();\n      loader.load(this.gltf, gltf => {\n        scene.add(gltf.scene);\n        animate(); // 모델 로드 후 애니메이션 시작\n      }, undefined, error => {\n        console.error(\"An error happened\", error);\n      });\n      // 애니메이션 루프\n      const animate = () => {\n        requestAnimationFrame(animate);\n        controls.update(); // 애니메이션 루프 내에서 컨트롤 업데이트\n        renderer.render(scene, camera);\n      };\n      animate();\n    },\n    startItem() {\n      axiosInstance.patch(\"/api/item/starting\").then(response => {\n        if (response.status == 200) {\n          Swal.fire({\n            title: \"잘 키우시오\",\n            text: \"당신의 돌\",\n            icon: \"success\"\n          }).then(() => {\n            location.reload();\n          });\n        }\n      }).catch(error => {\n        Swal.fire({\n          title: \"에러\",\n          text: error,\n          icon: \"warning\"\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["THREE","GLTFLoader","OrbitControls","axiosInstance","Swal","data","itemName","gltf","mounted","$store","state","userInfo","itemId","get","then","renderGame","catch","error","fire","title","text","icon","methods","scene","Scene","renderer","WebGLRenderer","canvas","document","querySelector","antialias","alpha","camera","PerspectiveCamera","position","set","background","controls","domElement","enableDamping","dampingFactor","screenSpacePanning","loader","load","add","animate","undefined","console","requestAnimationFrame","update","render","startItem","patch","response","status","location","reload"],"sources":["/Users/mungdori00/mun/vuemun/mun/src/components/MainGame.vue"],"sourcesContent":["<template>\n  <div\n    class=\"d-flex justify-content-center align-items-center vh-100\"\n    style=\"flex-direction: column\"\n    v-if=\"$store.state.userInfo.itemId\"\n  >\n    <div class=\"progress\" style=\"width: 300px\">\n      <div\n        class=\"progress-bar\"\n        role=\"progressbar\"\n        style=\"width: 25%\"\n        aria-valuenow=\"25\"\n        aria-valuemin=\"0\"\n        aria-valuemax=\"100\"\n      >\n        25%\n      </div>\n    </div>\n    <canvas id=\"canvas\" width=\"600\" height=\"600\"> </canvas>\n  </div>\n\n  <div class=\"container d-flex vh-100\" v-else>\n    <div class=\"row justify-content-center align-self-center w-100\">\n      <div class=\"col-auto\">\n        <button class=\"btn btn-primary\" @click=\"startItem\">GET START</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\nimport axiosInstance from \"@/axios/axiosinstance\";\nimport Swal from \"sweetalert2\";\nexport default {\n  data() {\n    return  {\n      itemName:'',\n      gltf: '',\n    }\n  },\n  mounted() {\n\n    if (this.$store.state.userInfo.itemId) {\n      axiosInstance.get('/api/item/'+this.$store.state.userInfo.itemId)\n      .then((data) => {\n          this.itemName = data.data.itemName;\n          this.gltf = data.data.gltf;\n          this.renderGame()\n        })\n        .catch((error) => {\n          Swal.fire({\n            title: \"에러\",\n            text: error,\n            icon: \"warning\",\n          });\n        });\n\n      \n    }\n  },\n\n  methods: {\n    renderGame() {\n      let scene = new THREE.Scene();\n      let renderer = new THREE.WebGLRenderer({\n        canvas: document.querySelector(\"#canvas\"),\n        antialias: true,\n        alpha: true, // alpha 옵션을 true로 설정하여 배경을 투명하게\n      });\n\n      let camera = new THREE.PerspectiveCamera(30, 1);\n      camera.position.set(0, 0, 5);\n\n      // scene.background = new THREE.Color(\"white\");\n      scene.background = null;\n      // OrbitControls 생성\n      const controls = new OrbitControls(camera, renderer.domElement);\n      controls.enableDamping = true; // 부드러운 움직임을 위해 댐핑 활성화\n      controls.dampingFactor = 0.25;\n      controls.screenSpacePanning = false;\n\n      // GLTFLoader를 사용하여 모델 로드\n      const loader = new GLTFLoader();\n      loader.load(\n        this.gltf,\n        (gltf) => {\n          scene.add(gltf.scene);\n          animate(); // 모델 로드 후 애니메이션 시작\n        },\n        undefined,\n        (error) => {\n          console.error(\"An error happened\", error);\n        }\n      );\n      // 애니메이션 루프\n      const animate = () => {\n        requestAnimationFrame(animate);\n        controls.update(); // 애니메이션 루프 내에서 컨트롤 업데이트\n        renderer.render(scene, camera);\n      };\n\n      animate();\n    },\n    startItem() {\n      axiosInstance\n        .patch(\"/api/item/starting\")\n        .then((response) => {\n          if (response.status == 200) {\n            Swal.fire({\n              title: \"잘 키우시오\",\n              text: \"당신의 돌\",\n              icon: \"success\",\n            }).then(() => {\n              location.reload();\n            });\n          }\n        })\n        .catch((error) => {\n          Swal.fire({\n            title: \"에러\",\n            text: error,\n            icon: \"warning\",\n          });\n        });\n    },\n  },\n};\n</script>\n\n<style>\n</style>"],"mappings":"AA+BA,OAAO,KAAKA,KAAI,MAAO,OAAO;AAC9B,SAASC,UAAS,QAAS,0CAA0C;AACrE,SAASC,aAAY,QAAS,8CAA8C;AAC5E,OAAOC,aAAY,MAAO,uBAAuB;AACjD,OAAOC,IAAG,MAAO,aAAa;AAC9B,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAQ;MACNC,QAAQ,EAAC,EAAE;MACXC,IAAI,EAAE;IACR;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IAER,IAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,QAAQ,CAACC,MAAM,EAAE;MACrCT,aAAa,CAACU,GAAG,CAAC,YAAY,GAAC,IAAI,CAACJ,MAAM,CAACC,KAAK,CAACC,QAAQ,CAACC,MAAM,EAC/DE,IAAI,CAAET,IAAI,IAAK;QACZ,IAAI,CAACC,QAAO,GAAID,IAAI,CAACA,IAAI,CAACC,QAAQ;QAClC,IAAI,CAACC,IAAG,GAAIF,IAAI,CAACA,IAAI,CAACE,IAAI;QAC1B,IAAI,CAACQ,UAAU,CAAC;MAClB,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChBb,IAAI,CAACc,IAAI,CAAC;UACRC,KAAK,EAAE,IAAI;UACXC,IAAI,EAAEH,KAAK;UACXI,IAAI,EAAE;QACR,CAAC,CAAC;MACJ,CAAC,CAAC;IAGN;EACF,CAAC;EAEDC,OAAO,EAAE;IACPP,UAAUA,CAAA,EAAG;MACX,IAAIQ,KAAI,GAAI,IAAIvB,KAAK,CAACwB,KAAK,CAAC,CAAC;MAC7B,IAAIC,QAAO,GAAI,IAAIzB,KAAK,CAAC0B,aAAa,CAAC;QACrCC,MAAM,EAAEC,QAAQ,CAACC,aAAa,CAAC,SAAS,CAAC;QACzCC,SAAS,EAAE,IAAI;QACfC,KAAK,EAAE,IAAI,CAAE;MACf,CAAC,CAAC;MAEF,IAAIC,MAAK,GAAI,IAAIhC,KAAK,CAACiC,iBAAiB,CAAC,EAAE,EAAE,CAAC,CAAC;MAC/CD,MAAM,CAACE,QAAQ,CAACC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;;MAE5B;MACAZ,KAAK,CAACa,UAAS,GAAI,IAAI;MACvB;MACA,MAAMC,QAAO,GAAI,IAAInC,aAAa,CAAC8B,MAAM,EAAEP,QAAQ,CAACa,UAAU,CAAC;MAC/DD,QAAQ,CAACE,aAAY,GAAI,IAAI,EAAE;MAC/BF,QAAQ,CAACG,aAAY,GAAI,IAAI;MAC7BH,QAAQ,CAACI,kBAAiB,GAAI,KAAK;;MAEnC;MACA,MAAMC,MAAK,GAAI,IAAIzC,UAAU,CAAC,CAAC;MAC/ByC,MAAM,CAACC,IAAI,CACT,IAAI,CAACpC,IAAI,EACRA,IAAI,IAAK;QACRgB,KAAK,CAACqB,GAAG,CAACrC,IAAI,CAACgB,KAAK,CAAC;QACrBsB,OAAO,CAAC,CAAC,EAAE;MACb,CAAC,EACDC,SAAS,EACR7B,KAAK,IAAK;QACT8B,OAAO,CAAC9B,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MAC3C,CACF,CAAC;MACD;MACA,MAAM4B,OAAM,GAAIA,CAAA,KAAM;QACpBG,qBAAqB,CAACH,OAAO,CAAC;QAC9BR,QAAQ,CAACY,MAAM,CAAC,CAAC,EAAE;QACnBxB,QAAQ,CAACyB,MAAM,CAAC3B,KAAK,EAAES,MAAM,CAAC;MAChC,CAAC;MAEDa,OAAO,CAAC,CAAC;IACX,CAAC;IACDM,SAASA,CAAA,EAAG;MACVhD,aAAY,CACTiD,KAAK,CAAC,oBAAoB,EAC1BtC,IAAI,CAAEuC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACC,MAAK,IAAK,GAAG,EAAE;UAC1BlD,IAAI,CAACc,IAAI,CAAC;YACRC,KAAK,EAAE,QAAQ;YACfC,IAAI,EAAE,OAAO;YACbC,IAAI,EAAE;UACR,CAAC,CAAC,CAACP,IAAI,CAAC,MAAM;YACZyC,QAAQ,CAACC,MAAM,CAAC,CAAC;UACnB,CAAC,CAAC;QACJ;MACF,CAAC,EACAxC,KAAK,CAAEC,KAAK,IAAK;QAChBb,IAAI,CAACc,IAAI,CAAC;UACRC,KAAK,EAAE,IAAI;UACXC,IAAI,EAAEH,KAAK;UACXI,IAAI,EAAE;QACR,CAAC,CAAC;MACJ,CAAC,CAAC;IACN;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}